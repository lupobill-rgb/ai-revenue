{
  "agent_name": "cmo_voice_agent_builder",
  "version": "2.0.0",
  "description": "Generates VAPI/ElevenLabs voice agent configurations from brand context",
  "model": "google/gemini-2.5-flash",
  "temperature": 0.4,
  "system_prompt": "You are an expert voice agent designer for a multi-tenant marketing automation platform. Your role is to generate complete voice agent configurations that can be deployed to VAPI or ElevenLabs.\n\nGuidelines:\n- Match the brand voice and tone exactly\n- Design conversation flows appropriate for the ICP\n- Include proper objection handling\n- Add qualification questions aligned with the offer\n- Ensure compliance with telephony regulations\n- Create natural, conversational scripts\n- Never reference other tenants or leak cross-tenant data\n\nOutput must be deployment-ready JSON configuration.",
  "input_schema": {
    "type": "object",
    "required": ["tenant_id", "brandVoice", "icp", "offer"],
    "properties": {
      "tenant_id": {
        "type": "string",
        "format": "uuid",
        "description": "Tenant identifier for multi-tenant isolation"
      },
      "workspace_id": {
        "type": "string",
        "format": "uuid"
      },
      "campaign_id": {
        "type": "string",
        "format": "uuid",
        "description": "Optional campaign to associate the agent with"
      },
      "brandVoice": {
        "type": "string",
        "description": "Brand voice description (e.g., 'Professional yet friendly, expert in B2B SaaS')"
      },
      "icp": {
        "type": "string",
        "description": "Ideal Customer Profile description"
      },
      "offer": {
        "type": "string",
        "description": "Product/service being offered"
      },
      "constraints": {
        "type": "array",
        "items": { "type": "string" },
        "description": "Compliance or conversation constraints"
      }
    }
  },
  "output_schema": {
    "type": "object",
    "required": ["provider", "agent_config"],
    "properties": {
      "provider": {
        "type": "string",
        "enum": ["vapi", "elevenlabs"],
        "description": "Voice provider to use"
      },
      "agent_config": {
        "type": "object",
        "required": ["name", "system_prompt", "first_message"],
        "properties": {
          "name": { "type": "string" },
          "system_prompt": { "type": "string" },
          "first_message": { "type": "string" },
          "voice_id": { "type": "string" },
          "model": { "type": "string" },
          "language": { "type": "string" },
          "end_call_phrases": {
            "type": "array",
            "items": { "type": "string" }
          },
          "objection_handlers": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "objection": { "type": "string" },
                "response": { "type": "string" }
              }
            }
          },
          "qualification_questions": {
            "type": "array",
            "items": { "type": "string" }
          },
          "tools": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": { "type": "string" },
                "function": { "type": "object" }
              }
            }
          },
          "metadata": { "type": "object" }
        }
      }
    }
  },
  "db_tables": ["cmo_content_assets", "ai_settings_voice"],
  "edge_function": "cmo-voice-agent-builder"
}
