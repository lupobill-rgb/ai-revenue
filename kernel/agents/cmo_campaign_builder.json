{
  "id": "cmo_campaign_builder",
  "agent_name": "CMO Autopilot Campaign Builder",
  "module": "ai_cmo",
  "version": "2.1.0",
  "description": "Builds COMPLETE, IMPLEMENTATION-READY B2B campaigns with all assets, automations, and voice scripts",
  "model": "google/gemini-2.5-flash",
  "temperature": 0.4,
  "system_prompt": "You are the CMO Autopilot Campaign Builder for an AI marketing OS.\n\nYour job is to build COMPLETE, IMPLEMENTATION-READY B2B campaigns for a specific tenant.\nThe orchestration kernel will handle storage, routing, and execution.\nYou never talk to the user directly. You only return JSON for the system.\n\nRules:\n- Respect the tenant's ICP, offer, and selected channels.\n- Campaigns must be realistic, not hypey or scammy.\n- Assume the platform will send emails, SMS, LinkedIn content, AI voice calls, and direct traffic to landing pages.\n- Voice calls are done by AI agents (e.g., Vapi or ElevenLabs) with human-like tone.\n- Always generate assets that can be directly inserted into the database with minimal post-processing.\n- All content should sound human, not robotic: conversational, concise, expert-level.\n- Optimize for the desired RESULT: leads, meetings, revenue, or engagement.\n- If a channel is not listed in \"channels\", do not generate assets for it.\n\nYou must respond with a SINGLE valid JSON object only.\nDo not include explanations, comments, or extra keys.",
  "input_schema": {
    "type": "object",
    "required": ["tenant_id", "icp", "offer", "channels", "desired_result"],
    "properties": {
      "tenant_id": { "type": "string", "format": "uuid", "description": "Tenant UUID for isolation" },
      "campaign_id": { "type": "string", "format": "uuid", "description": "Optional existing campaign ID to update" },
      "icp": { "type": "string", "description": "Who we are targeting - ICP description" },
      "offer": { "type": "string", "description": "What we sell - product/service offer details" },
      "channels": {
        "type": "array",
        "items": { "type": "string", "enum": ["email", "sms", "linkedin", "voice", "landing_page"] },
        "description": "Selected marketing channels"
      },
      "desired_result": {
        "type": "string",
        "enum": ["leads", "meetings", "revenue", "engagement"],
        "description": "Primary campaign outcome goal"
      },
      "brand_voice": {
        "type": "string",
        "description": "Optional extra brand voice guidance"
      }
    }
  },
  "output_schema": {
    "type": "object",
    "required": ["campaign", "automations"],
    "properties": {
      "campaign": {
        "type": "object",
        "required": ["name", "objective", "summary"],
        "properties": {
          "name": { "type": "string" },
          "objective": { "type": "string", "enum": ["leads", "meetings", "revenue", "engagement"] },
          "summary": { "type": "string" }
        }
      },
      "posts": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "hook": { "type": "string" },
            "body": { "type": "string" },
            "cta": { "type": "string" },
            "suggested_channel": { "type": "string", "enum": ["linkedin", "twitter", "instagram", "facebook"] },
            "goal_alignment": { "type": "string" }
          }
        }
      },
      "emails": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["step_order", "name", "subject", "body_html", "body_text"],
          "properties": {
            "step_order": { "type": "number" },
            "name": { "type": "string" },
            "subject": { "type": "string" },
            "preview_text": { "type": "string" },
            "body_html": { "type": "string" },
            "body_text": { "type": "string" },
            "purpose": { "type": "string" },
            "cta": { "type": "string" }
          }
        }
      },
      "sms": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["step_order", "body"],
          "properties": {
            "step_order": { "type": "number" },
            "body": { "type": "string" },
            "purpose": { "type": "string" }
          }
        }
      },
      "landing_pages": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["template_type", "internal_name", "url_slug", "hero_headline"],
          "properties": {
            "template_type": { "type": "string", "enum": ["saas", "lead_magnet", "webinar", "services", "booking", "long_form"] },
            "internal_name": { "type": "string" },
            "url_slug": { "type": "string" },
            "hero_headline": { "type": "string" },
            "hero_subheadline": { "type": "string" },
            "hero_supporting_points": { "type": "array", "items": { "type": "string" } },
            "sections": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": { "type": "string", "enum": ["problem_solution", "features", "social_proof", "process", "faq", "pricing", "booking", "story"] },
                  "heading": { "type": "string" },
                  "body": { "type": "string" },
                  "bullets": { "type": "array", "items": { "type": "string" } }
                }
              }
            },
            "primary_cta_label": { "type": "string" },
            "primary_cta_type": { "type": "string", "enum": ["form", "calendar"] },
            "form_fields": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "label": { "type": "string" },
                  "required": { "type": "boolean" }
                }
              }
            }
          }
        }
      },
      "voice_scripts": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["scenario", "script"],
          "properties": {
            "scenario": { "type": "string", "enum": ["first_outreach", "follow_up", "no_show", "qualification"] },
            "script": { "type": "string" },
            "notes_for_agent": { "type": "string" }
          }
        }
      },
      "automations": {
        "type": "object",
        "required": ["steps"],
        "properties": {
          "steps": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["step_order", "type"],
              "properties": {
                "step_order": { "type": "number" },
                "type": { "type": "string", "enum": ["email", "sms", "wait", "condition", "voice"] },
                "condition_expression": { "type": ["string", "null"] },
                "wait_hours": { "type": ["number", "null"] },
                "reference": {
                  "type": "object",
                  "properties": {
                    "channel": { "type": "string", "enum": ["email", "sms", "voice", "system"] },
                    "asset_index": { "type": ["number", "null"] }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "db_tables": [
    "cmo_campaigns",
    "cmo_content_assets",
    "cmo_campaign_channels",
    "automation_steps",
    "content_calendar"
  ],
  "edge_function": "cmo-campaign-builder"
}
